<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.foodary.dao.DietDAO">
		
	<select id="userFoodList" parameterType="int" resultType="uvo">
		select * from userfood where gup = 0 order by IDX desc
	</select>
	
	<!-- 메인글 전체 개수를 얻어온다. -->
	<select id="foodSelectCount" resultType="int">
		select count(*) from food
	</select>
	
	<!-- 1페이지 분량의 메인글을 얻어온다. -->
	<select id="foodSelectList" parameterType="java.util.HashMap" resultType="fvo">
		<![CDATA[
		select * from (
			select rownum rnum, GG.* from (
				select * from food order by idx desc
			) GG where rownum <= #{endNo}
		) where rnum >= #{startNo}
		]]>
	</select>
	
	<!-- memo 필드에 검색어가 포함된 1페이지 분량의 글 목록을 얻어온다. -->
	<select id="foodSearchList" parameterType="pvo" resultType="fvo">
		<![CDATA[
			select * from (
				select rownum rnum, GG.* from (
					select * from FOOD where foodname like '%'||#{foodName}||'%' order by IDX desc
			  ) GG where rownum <= #{endNo}
		  ) where rnum >= #{startNo}
		]]>
	</select>
	
	
</mapper>














